const __vite__fileDeps=["./module-BDCzeD4R.js","./module-C-VadMaF.js","./index-6jqsFzvP.js","./index-b6vQhz8R.css","./module-BA06XY8_.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{s as At,W as Mn,p as Ct,a as pt,A as An,S as Cn}from"./StaticAudio-31BcyjTb.js";import{_ as Pt,b as Pn}from"./index-6jqsFzvP.js";import{U as Bn}from"./Upload-Gmod6Y_m.js";import{M as en}from"./ModifyUpload-rVpOlAnG.js";import{S as tn}from"./Index-BXfYA563.js";import{B as Ln}from"./BlockLabel-CR_JnqLq.js";import{M as zn}from"./Music-CDm0RGMk.js";import{a as In,S as Tn}from"./SelectSource-7LKWFg6v.js";import{S as Un}from"./StreamingBar-KX5cd1HF.js";import{P as qn}from"./Trim-JQYgj7Jd.js";import{f as fe}from"./Blocks-C2CgG-Bp.js";import{B as nn}from"./Button-BEa7U3jO.js";import{U as jn}from"./UploadText-I0dTGtKv.js";import{default as Go}from"./Example-BQyGztrG.js";import"./Empty-CEggepS0.js";import"./ShareButton-ZdEp2dZh.js";import"./Community-CC3ywblm.js";import"./Download-DVtk-Jv3.js";import"./IconButtonWrapper-Cbc1cIwN.js";import"./Play-B0Q0U1Qz.js";import"./Undo-CpmTQw3B.js";import"./file-url-DoRRNcdi.js";import"./hls-CnVhpNcu.js";import"./DownloadLink-BVP5imSI.js";import"./svelte/svelte.js";/* empty css                                             */import"./Upload-Cp8Go_XF.js";function bt(n,e,t,i){return new(t||(t=Promise))(function(o,l){function r(_){try{s(i.next(_))}catch(a){l(a)}}function u(_){try{s(i.throw(_))}catch(a){l(a)}}function s(_){var a;_.done?o(_.value):(a=_.value,a instanceof t?a:new t(function(f){f(a)})).then(r,u)}s((i=i.apply(n,[])).next())})}class On{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(e,t,i){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),i?.once){const o=()=>{this.removeEventListener(e,o),this.removeEventListener(e,t)};return this.addEventListener(e,o),o}return()=>this.removeEventListener(e,t)}removeEventListener(e,t){var i;(i=this.listeners[e])===null||i===void 0||i.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(i=>i(...t))}}class Wn extends On{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}}const Nn=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class qe extends Wn{constructor(e){var t;super(Object.assign(Object.assign({},e),{audioBitsPerSecond:(t=e.audioBitsPerSecond)!==null&&t!==void 0?t:128e3})),this.stream=null,this.mediaRecorder=null}static create(e){return new qe(e||{})}renderMicStream(e){const t=new AudioContext,i=t.createMediaStreamSource(e),o=t.createAnalyser();i.connect(o);const l=o.frequencyBinCount,r=new Float32Array(l),u=l/t.sampleRate;let s;const _=()=>{o.getFloatTimeDomainData(r),this.wavesurfer&&(this.wavesurfer.options.cursorWidth=0,this.wavesurfer.options.interact=!1,this.wavesurfer.load("",[r],u)),s=requestAnimationFrame(_)};return _(),()=>{cancelAnimationFrame(s),i?.disconnect(),t?.close()}}startMic(e){return bt(this,void 0,void 0,function*(){let t;try{t=yield navigator.mediaDevices.getUserMedia({audio:!e?.deviceId||{deviceId:e.deviceId}})}catch(o){throw new Error("Error accessing the microphone: "+o.message)}const i=this.renderMicStream(t);return this.subscriptions.push(this.once("destroy",i)),this.stream=t,t})}stopMic(){this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(e){return bt(this,void 0,void 0,function*(){const t=this.stream||(yield this.startMic(e)),i=this.mediaRecorder||new MediaRecorder(t,{mimeType:this.options.mimeType||Nn.find(l=>MediaRecorder.isTypeSupported(l)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=i,this.stopRecording();const o=[];i.ondataavailable=l=>{l.data.size>0&&o.push(l.data)},i.onstop=()=>{var l;const r=new Blob(o,{type:i.mimeType});this.emit("record-end",r),this.options.renderRecordedAudio!==!1&&((l=this.wavesurfer)===null||l===void 0||l.load(URL.createObjectURL(r)))},i.start(),this.emit("record-start")})}isRecording(){var e;return((e=this.mediaRecorder)===null||e===void 0?void 0:e.state)==="recording"}isPaused(){var e;return((e=this.mediaRecorder)===null||e===void 0?void 0:e.state)==="paused"}stopRecording(){var e;this.isRecording()&&((e=this.mediaRecorder)===null||e===void 0||e.stop())}pauseRecording(){var e;this.isRecording()&&((e=this.mediaRecorder)===null||e===void 0||e.pause(),this.emit("record-pause"))}resumeRecording(){var e;this.isPaused()&&((e=this.mediaRecorder)===null||e===void 0||e.resume(),this.emit("record-resume"))}static getAvailableAudioDevices(){return bt(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(e=>e.filter(t=>t.kind==="audioinput"))})}destroy(){super.destroy(),this.stopRecording(),this.stopMic()}}const{SvelteComponent:Fn,append:on,attr:Bt,destroy_each:Hn,detach:Xe,element:vt,empty:Vn,ensure_array_like:Lt,flush:zt,init:Jn,insert:Ze,noop:It,safe_not_equal:Gn,set_data:sn,set_input_value:wt,text:rn}=window.__gradio__svelte__internal,{createEventDispatcher:Yn}=window.__gradio__svelte__internal;function Tt(n,e,t){const i=n.slice();return i[3]=e[t],i}function Kn(n){let e,t=Lt(n[0]),i=[];for(let o=0;o<t.length;o+=1)i[o]=Ut(Tt(n,t,o));return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=Vn()},m(o,l){for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(o,l);Ze(o,e,l)},p(o,l){if(l&1){t=Lt(o[0]);let r;for(r=0;r<t.length;r+=1){const u=Tt(o,t,r);i[r]?i[r].p(u,l):(i[r]=Ut(u),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},d(o){o&&Xe(e),Hn(i,o)}}}function Qn(n){let e,t=n[1]("audio.no_microphone")+"",i;return{c(){e=vt("option"),i=rn(t),e.__value="",wt(e,e.__value)},m(o,l){Ze(o,e,l),on(e,i)},p(o,l){l&2&&t!==(t=o[1]("audio.no_microphone")+"")&&sn(i,t)},d(o){o&&Xe(e)}}}function Ut(n){let e,t=n[3].label+"",i,o;return{c(){e=vt("option"),i=rn(t),e.__value=o=n[3].deviceId,wt(e,e.__value)},m(l,r){Ze(l,e,r),on(e,i)},p(l,r){r&1&&t!==(t=l[3].label+"")&&sn(i,t),r&1&&o!==(o=l[3].deviceId)&&(e.__value=o,wt(e,e.__value))},d(l){l&&Xe(e)}}}function Xn(n){let e,t;function i(r,u){return r[0].length===0?Qn:Kn}let o=i(n),l=o(n);return{c(){e=vt("select"),l.c(),Bt(e,"class","mic-select svelte-1ya9x7a"),Bt(e,"aria-label","Select input device"),e.disabled=t=n[0].length===0},m(r,u){Ze(r,e,u),l.m(e,null)},p(r,[u]){o===(o=i(r))&&l?l.p(r,u):(l.d(1),l=o(r),l&&(l.c(),l.m(e,null))),u&1&&t!==(t=r[0].length===0)&&(e.disabled=t)},i:It,o:It,d(r){r&&Xe(e),l.d()}}}function Zn(n,e,t){let{i18n:i}=e,{micDevices:o=[]}=e;const l=Yn();return n.$$set=r=>{"i18n"in r&&t(1,i=r.i18n),"micDevices"in r&&t(0,o=r.micDevices)},n.$$.update=()=>{if(n.$$.dirty&2)try{let r=[];qe.getAvailableAudioDevices().then(u=>{t(0,o=u),u.forEach(s=>{s.deviceId&&r.push(s)}),t(0,o=r)})}catch(r){throw r instanceof DOMException&&r.name=="NotAllowedError"&&l("error",i("audio.allow_recording_access")),r}},[o,i]}class ln extends Fn{constructor(e){super(),Jn(this,e,Zn,Xn,Gn,{i18n:1,micDevices:0})}get i18n(){return this.$$.ctx[1]}set i18n(e){this.$$set({i18n:e}),zt()}get micDevices(){return this.$$.ctx[0]}set micDevices(e){this.$$set({micDevices:e}),zt()}}const{SvelteComponent:$n,add_flush_callback:xn,append:U,attr:Z,bind:ei,binding_callbacks:De,create_component:qt,destroy_component:jt,detach:an,element:ue,flush:Ae,init:ti,insert:un,listen:Ce,mount_component:Ot,run_all:ni,safe_not_equal:ii,set_data:Pe,space:ye,text:Be,transition_in:Wt,transition_out:Nt}=window.__gradio__svelte__internal;function Ft(n){let e,t;return{c(){e=ue("time"),t=Be(n[2]),Z(e,"class","duration-button duration svelte-11fum4b")},m(i,o){un(i,e,o),U(e,t)},p(i,o){o&4&&Pe(t,i[2])},d(i){i&&an(e)}}}function oi(n){let e,t,i,o=n[1]("audio.record")+"",l,r,u,s=n[1]("audio.stop")+"",_,a,f,g,p=n[1]("audio.stop")+"",S,E,c,d,y,w,B=n[1]("audio.resume")+"",D,A,W,I,v,z,N,V;d=new qn({});let C=n[4]&&!n[3]&&Ft(n);function de(R){n[21](R)}let J={i18n:n[1]};return n[5]!==void 0&&(J.micDevices=n[5]),I=new ln({props:J}),De.push(()=>ei(I,"micDevices",de)),{c(){e=ue("div"),t=ue("div"),i=ue("button"),l=Be(o),r=ye(),u=ue("button"),_=Be(s),f=ye(),g=ue("button"),S=Be(p),E=ye(),c=ue("button"),qt(d.$$.fragment),y=ye(),w=ue("button"),D=Be(B),A=ye(),C&&C.c(),W=ye(),qt(I.$$.fragment),Z(i,"class","record record-button svelte-11fum4b"),Z(u,"class",a="stop-button "+(n[0].isPaused()?"stop-button-paused":"")+" svelte-11fum4b"),Z(g,"id","stop-paused"),Z(g,"class","stop-button-paused svelte-11fum4b"),Z(c,"aria-label","pause"),Z(c,"class","pause-button svelte-11fum4b"),Z(w,"class","resume-button svelte-11fum4b"),Z(t,"class","wrapper svelte-11fum4b"),Z(e,"class","controls svelte-11fum4b")},m(R,k){un(R,e,k),U(e,t),U(t,i),U(i,l),n[11](i),U(t,r),U(t,u),U(u,_),n[13](u),U(t,f),U(t,g),U(g,S),n[15](g),U(t,E),U(t,c),Ot(d,c,null),n[17](c),U(t,y),U(t,w),U(w,D),n[19](w),U(t,A),C&&C.m(t,null),U(e,W),Ot(I,e,null),z=!0,N||(V=[Ce(i,"click",n[12]),Ce(u,"click",n[14]),Ce(g,"click",n[16]),Ce(c,"click",n[18]),Ce(w,"click",n[20])],N=!0)},p(R,[k]){(!z||k&2)&&o!==(o=R[1]("audio.record")+"")&&Pe(l,o),(!z||k&2)&&s!==(s=R[1]("audio.stop")+"")&&Pe(_,s),(!z||k&1&&a!==(a="stop-button "+(R[0].isPaused()?"stop-button-paused":"")+" svelte-11fum4b"))&&Z(u,"class",a),(!z||k&2)&&p!==(p=R[1]("audio.stop")+"")&&Pe(S,p),(!z||k&2)&&B!==(B=R[1]("audio.resume")+"")&&Pe(D,B),R[4]&&!R[3]?C?C.p(R,k):(C=Ft(R),C.c(),C.m(t,null)):C&&(C.d(1),C=null);const T={};k&2&&(T.i18n=R[1]),!v&&k&32&&(v=!0,T.micDevices=R[5],xn(()=>v=!1)),I.$set(T)},i(R){z||(Wt(d.$$.fragment,R),Wt(I.$$.fragment,R),z=!0)},o(R){Nt(d.$$.fragment,R),Nt(I.$$.fragment,R),z=!1},d(R){R&&an(e),n[11](null),n[13](null),n[15](null),jt(d),n[17](null),n[19](null),C&&C.d(),jt(I),N=!1,ni(V)}}}function si(n,e,t){let{record:i}=e,{i18n:o}=e,l=[],r,u,s,_,a,{record_time:f}=e,{show_recording_waveform:g}=e,{timing:p=!1}=e;function S(v){De[v?"unshift":"push"](()=>{r=v,t(6,r),t(0,i)})}const E=()=>i.startRecording();function c(v){De[v?"unshift":"push"](()=>{_=v,t(9,_),t(0,i)})}const d=()=>{i.isPaused()&&(i.resumeRecording(),i.stopRecording()),i.stopRecording()};function y(v){De[v?"unshift":"push"](()=>{a=v,t(10,a),t(0,i)})}const w=()=>{i.isPaused()&&(i.resumeRecording(),i.stopRecording()),i.stopRecording()};function B(v){De[v?"unshift":"push"](()=>{u=v,t(7,u),t(0,i)})}const D=()=>i.pauseRecording();function A(v){De[v?"unshift":"push"](()=>{s=v,t(8,s),t(0,i)})}const W=()=>i.resumeRecording();function I(v){l=v,t(5,l)}return n.$$set=v=>{"record"in v&&t(0,i=v.record),"i18n"in v&&t(1,o=v.i18n),"record_time"in v&&t(2,f=v.record_time),"show_recording_waveform"in v&&t(3,g=v.show_recording_waveform),"timing"in v&&t(4,p=v.timing)},n.$$.update=()=>{n.$$.dirty&1&&i.on("record-start",()=>{i.startMic(),t(6,r.style.display="none",r),t(9,_.style.display="flex",_),t(7,u.style.display="block",u)}),n.$$.dirty&1&&i.on("record-end",()=>{i.isPaused()&&(i.resumeRecording(),i.stopRecording()),i.stopMic(),t(6,r.style.display="flex",r),t(9,_.style.display="none",_),t(7,u.style.display="none",u),t(6,r.disabled=!1,r)}),n.$$.dirty&1&&i.on("record-pause",()=>{t(7,u.style.display="none",u),t(8,s.style.display="block",s),t(9,_.style.display="none",_),t(10,a.style.display="flex",a)}),n.$$.dirty&1&&i.on("record-resume",()=>{t(7,u.style.display="block",u),t(8,s.style.display="none",s),t(6,r.style.display="none",r),t(9,_.style.display="flex",_),t(10,a.style.display="none",a)})},[i,o,f,g,p,l,r,u,s,_,a,S,E,c,d,y,w,B,D,A,W,I]}class ri extends $n{constructor(e){super(),ti(this,e,si,oi,ii,{record:0,i18n:1,record_time:2,show_recording_waveform:3,timing:4})}get record(){return this.$$.ctx[0]}set record(e){this.$$set({record:e}),Ae()}get i18n(){return this.$$.ctx[1]}set i18n(e){this.$$set({i18n:e}),Ae()}get record_time(){return this.$$.ctx[2]}set record_time(e){this.$$set({record_time:e}),Ae()}get show_recording_waveform(){return this.$$.ctx[3]}set show_recording_waveform(e){this.$$set({show_recording_waveform:e}),Ae()}get timing(){return this.$$.ctx[4]}set timing(e){this.$$set({timing:e}),Ae()}}const{SvelteComponent:li,add_flush_callback:Je,append:Q,attr:x,bind:Ge,binding_callbacks:ce,check_outros:Ht,create_component:_n,destroy_component:cn,detach:je,element:ee,flush:ge,group_outros:Vt,init:ai,insert:Oe,mount_component:fn,noop:ui,safe_not_equal:_i,set_data:dn,space:Re,text:mn,transition_in:_e,transition_out:Se}=window.__gradio__svelte__internal,{onMount:ci}=window.__gradio__svelte__internal,{createEventDispatcher:fi}=window.__gradio__svelte__internal;function Jt(n){let e,t,i,o,l,r=n[0]==="edit"&&n[16]>0&&Gt(n);function u(a,f){return a[15]?mi:di}let s=u(n),_=s(n);return{c(){e=ee("div"),t=ee("time"),t.textContent="0:00",i=Re(),o=ee("div"),r&&r.c(),l=Re(),_.c(),x(t,"class","time svelte-9n45fh"),x(e,"class","timestamps svelte-9n45fh")},m(a,f){Oe(a,e,f),Q(e,t),n[22](t),Q(e,i),Q(e,o),r&&r.m(o,null),Q(o,l),_.m(o,null)},p(a,f){a[0]==="edit"&&a[16]>0?r?r.p(a,f):(r=Gt(a),r.c(),r.m(o,l)):r&&(r.d(1),r=null),s===(s=u(a))&&_?_.p(a,f):(_.d(1),_=s(a),_&&(_.c(),_.m(o,null)))},d(a){a&&je(e),n[22](null),r&&r.d(),_.d()}}}function Gt(n){let e,t=fe(n[16])+"",i;return{c(){e=ee("time"),i=mn(t),x(e,"class","trim-duration svelte-9n45fh")},m(o,l){Oe(o,e,l),Q(e,i)},p(o,l){l[0]&65536&&t!==(t=fe(o[16])+"")&&dn(i,t)},d(o){o&&je(e)}}}function di(n){let e;return{c(){e=ee("time"),e.textContent="0:00",x(e,"class","duration svelte-9n45fh")},m(t,i){Oe(t,e,i),n[23](e)},p:ui,d(t){t&&je(e),n[23](null)}}}function mi(n){let e,t=fe(n[14])+"",i;return{c(){e=ee("time"),i=mn(t),x(e,"class","duration svelte-9n45fh")},m(o,l){Oe(o,e,l),Q(e,i)},p(o,l){l[0]&16384&&t!==(t=fe(o[14])+"")&&dn(i,t)},d(o){o&&je(e)}}}function Yt(n){let e,t,i;function o(r){n[24](r)}let l={i18n:n[1],timing:n[15],show_recording_waveform:n[2].show_recording_waveform,record_time:fe(n[14])};return n[6]!==void 0&&(l.record=n[6]),e=new ri({props:l}),ce.push(()=>Ge(e,"record",o)),{c(){_n(e.$$.fragment)},m(r,u){fn(e,r,u),i=!0},p(r,u){const s={};u[0]&2&&(s.i18n=r[1]),u[0]&32768&&(s.timing=r[15]),u[0]&4&&(s.show_recording_waveform=r[2].show_recording_waveform),u[0]&16384&&(s.record_time=fe(r[14])),!t&&u[0]&64&&(t=!0,s.record=r[6],Je(()=>t=!1)),e.$set(s)},i(r){i||(_e(e.$$.fragment,r),i=!0)},o(r){Se(e.$$.fragment,r),i=!1},d(r){cn(e,r)}}}function Kt(n){let e,t,i,o,l;function r(a){n[25](a)}function u(a){n[26](a)}function s(a){n[27](a)}let _={container:n[10],playing:n[9],audio_duration:n[13],i18n:n[1],editable:n[4],interactive:!0,handle_trim_audio:n[17],show_redo:!0,handle_reset_value:n[3],waveform_options:n[2]};return n[5]!==void 0&&(_.waveform=n[5]),n[16]!==void 0&&(_.trimDuration=n[16]),n[0]!==void 0&&(_.mode=n[0]),e=new Mn({props:_}),ce.push(()=>Ge(e,"waveform",r)),ce.push(()=>Ge(e,"trimDuration",u)),ce.push(()=>Ge(e,"mode",s)),{c(){_n(e.$$.fragment)},m(a,f){fn(e,a,f),l=!0},p(a,f){const g={};f[0]&1024&&(g.container=a[10]),f[0]&512&&(g.playing=a[9]),f[0]&8192&&(g.audio_duration=a[13]),f[0]&2&&(g.i18n=a[1]),f[0]&16&&(g.editable=a[4]),f[0]&8&&(g.handle_reset_value=a[3]),f[0]&4&&(g.waveform_options=a[2]),!t&&f[0]&32&&(t=!0,g.waveform=a[5],Je(()=>t=!1)),!i&&f[0]&65536&&(i=!0,g.trimDuration=a[16],Je(()=>i=!1)),!o&&f[0]&1&&(o=!0,g.mode=a[0],Je(()=>o=!1)),e.$set(g)},i(a){l||(_e(e.$$.fragment,a),l=!0)},o(a){Se(e.$$.fragment,a),l=!1},d(a){cn(e,a)}}}function gi(n){let e,t,i,o,l,r,u,s,_=(n[15]||n[12])&&n[2].show_recording_waveform&&Jt(n),a=n[11]&&!n[12]&&Yt(n),f=n[5]&&n[12]&&Kt(n);return{c(){e=ee("div"),t=ee("div"),i=Re(),o=ee("div"),l=Re(),_&&_.c(),r=Re(),a&&a.c(),u=Re(),f&&f.c(),x(t,"class","microphone svelte-9n45fh"),x(t,"data-testid","microphone-waveform"),x(o,"data-testid","recording-waveform"),x(e,"class","component-wrapper svelte-9n45fh")},m(g,p){Oe(g,e,p),Q(e,t),n[20](t),Q(e,i),Q(e,o),n[21](o),Q(e,l),_&&_.m(e,null),Q(e,r),a&&a.m(e,null),Q(e,u),f&&f.m(e,null),s=!0},p(g,p){(g[15]||g[12])&&g[2].show_recording_waveform?_?_.p(g,p):(_=Jt(g),_.c(),_.m(e,r)):_&&(_.d(1),_=null),g[11]&&!g[12]?a?(a.p(g,p),p[0]&6144&&_e(a,1)):(a=Yt(g),a.c(),_e(a,1),a.m(e,u)):a&&(Vt(),Se(a,1,1,()=>{a=null}),Ht()),g[5]&&g[12]?f?(f.p(g,p),p[0]&4128&&_e(f,1)):(f=Kt(g),f.c(),_e(f,1),f.m(e,null)):f&&(Vt(),Se(f,1,1,()=>{f=null}),Ht())},i(g){s||(_e(a),_e(f),s=!0)},o(g){Se(a),Se(f),s=!1},d(g){g&&je(e),n[20](null),n[21](null),_&&_.d(),a&&a.d(),f&&f.d()}}}function hi(n,e,t){let{mode:i}=e,{i18n:o}=e,{dispatch_blob:l}=e,{waveform_settings:r}=e,{waveform_options:u={show_recording_waveform:!0}}=e,{handle_reset_value:s}=e,{editable:_=!0}=e,a,f,g=!1,p,S,E,c=null,d,y,w,B=0,D,A=!1,W=0;const I=()=>{clearInterval(D),D=setInterval(()=>{t(14,B++,B)},1e3)},v=fi();function z(){if(I(),t(15,A=!0),v("start_recording"),u.show_recording_waveform){let b=S;b&&(b.style.display="block")}}async function N(b){t(14,B=0),t(15,A=!1),clearInterval(D);try{const F=await b.arrayBuffer(),H=await new AudioContext({sampleRate:r.sampleRate}).decodeAudioData(F);H&&await Ct(H).then(async ke=>{await l([ke],"change"),await l([ke],"stop_recording")})}catch(F){console.error(F)}}const V=()=>{S&&t(11,S.innerHTML="",S),a!==void 0&&a.destroy(),S&&(a=pt.create({...r,normalize:!1,container:S}),t(6,E=a.registerPlugin(qe.create())),E.startMic(),E?.on("record-end",N),E?.on("record-start",z),E?.on("record-pause",()=>{v("pause_recording"),clearInterval(D)}),E?.on("record-end",b=>{t(12,c=URL.createObjectURL(b));const F=S,P=p;F&&(F.style.display="none"),P&&c&&(P.innerHTML="",C())}))},C=()=>{let b=p;!c||!b||t(5,f=pt.create({container:b,url:c,...r}))},de=async(b,F)=>{t(0,i="edit");const P=f.getDecodedData();P&&await Ct(P,b,F).then(async H=>{await l([H],"change"),await l([H],"stop_recording"),f.destroy(),C()}),v("edit")};ci(()=>{V(),window.addEventListener("keydown",b=>{b.key==="ArrowRight"?At(f,.1):b.key==="ArrowLeft"&&At(f,-.1)})});function J(b){ce[b?"unshift":"push"](()=>{S=b,t(11,S)})}function R(b){ce[b?"unshift":"push"](()=>{p=b,t(10,p)})}function k(b){ce[b?"unshift":"push"](()=>{d=b,t(7,d),t(5,f)})}function T(b){ce[b?"unshift":"push"](()=>{y=b,t(8,y),t(5,f)})}function G(b){E=b,t(6,E)}function Y(b){f=b,t(5,f)}function ve(b){W=b,t(16,W)}function K(b){i=b,t(0,i)}return n.$$set=b=>{"mode"in b&&t(0,i=b.mode),"i18n"in b&&t(1,o=b.i18n),"dispatch_blob"in b&&t(18,l=b.dispatch_blob),"waveform_settings"in b&&t(19,r=b.waveform_settings),"waveform_options"in b&&t(2,u=b.waveform_options),"handle_reset_value"in b&&t(3,s=b.handle_reset_value),"editable"in b&&t(4,_=b.editable)},n.$$.update=()=>{n.$$.dirty[0]&64&&E?.on("record-resume",()=>{I()}),n.$$.dirty[0]&288&&f?.on("decode",b=>{t(13,w=b),y&&t(8,y.textContent=fe(b),y)}),n.$$.dirty[0]&160&&f?.on("timeupdate",b=>d&&t(7,d.textContent=fe(b),d)),n.$$.dirty[0]&32&&f?.on("pause",()=>{v("pause"),t(9,g=!1)}),n.$$.dirty[0]&32&&f?.on("play",()=>{v("play"),t(9,g=!0)}),n.$$.dirty[0]&32&&f?.on("finish",()=>{v("stop"),t(9,g=!1)})},[i,o,u,s,_,f,E,d,y,g,p,S,c,w,B,A,W,de,l,r,J,R,k,T,G,Y,ve,K]}class bi extends li{constructor(e){super(),ai(this,e,hi,gi,_i,{mode:0,i18n:1,dispatch_blob:18,waveform_settings:19,waveform_options:2,handle_reset_value:3,editable:4},null,[-1,-1])}get mode(){return this.$$.ctx[0]}set mode(e){this.$$set({mode:e}),ge()}get i18n(){return this.$$.ctx[1]}set i18n(e){this.$$set({i18n:e}),ge()}get dispatch_blob(){return this.$$.ctx[18]}set dispatch_blob(e){this.$$set({dispatch_blob:e}),ge()}get waveform_settings(){return this.$$.ctx[19]}set waveform_settings(e){this.$$set({waveform_settings:e}),ge()}get waveform_options(){return this.$$.ctx[2]}set waveform_options(e){this.$$set({waveform_options:e}),ge()}get handle_reset_value(){return this.$$.ctx[3]}set handle_reset_value(e){this.$$set({handle_reset_value:e}),ge()}get editable(){return this.$$.ctx[4]}set editable(e){this.$$set({editable:e}),ge()}}const{SvelteComponent:pi,add_flush_callback:wi,append:X,attr:te,bind:vi,binding_callbacks:gn,check_outros:ki,create_component:hn,destroy_component:bn,detach:We,element:se,flush:ae,group_outros:yi,init:Di,insert:Ne,listen:kt,mount_component:pn,noop:Qe,null_to_empty:Qt,safe_not_equal:Ri,set_data:yt,set_style:Xt,space:ze,text:Dt,transition_in:Ye,transition_out:Ke}=window.__gradio__svelte__internal,{onMount:Si}=window.__gradio__svelte__internal;function Zt(n){let e;return{c(){e=se("div"),Xt(e,"display",n[0]?"block":"none")},m(t,i){Ne(t,e,i),n[11](e)},p(t,i){i&1&&Xt(e,"display",t[0]?"block":"none")},d(t){t&&We(e),n[11](null)}}}function Ei(n){let e,t,i,o=n[4]("audio.record")+"",l,r,u;return{c(){e=se("button"),t=se("span"),t.innerHTML='<span class="dot"></span>',i=ze(),l=Dt(o),te(t,"class","record-icon"),te(e,"class","record-button svelte-1fz19cj")},m(s,_){Ne(s,e,_),X(e,t),X(e,i),X(e,l),r||(u=kt(e,"click",n[14]),r=!0)},p(s,_){_&16&&o!==(o=s[4]("audio.record")+"")&&yt(l,o)},i:Qe,o:Qe,d(s){s&&We(e),r=!1,u()}}}function Mi(n){let e,t,i,o,l=n[4]("audio.waiting")+"",r,u,s,_;return i=new In({}),{c(){e=se("button"),t=se("div"),hn(i.$$.fragment),o=ze(),r=Dt(l),te(t,"class","icon svelte-1fz19cj"),te(e,"class","spinner-button svelte-1fz19cj")},m(a,f){Ne(a,e,f),X(e,t),pn(i,t,null),X(e,o),X(e,r),u=!0,s||(_=kt(e,"click",n[13]),s=!0)},p(a,f){(!u||f&16)&&l!==(l=a[4]("audio.waiting")+"")&&yt(r,l)},i(a){u||(Ye(i.$$.fragment,a),u=!0)},o(a){Ke(i.$$.fragment,a),u=!1},d(a){a&&We(e),bn(i),s=!1,_()}}}function Ai(n){let e,t,i,o=(n[1]?n[4]("audio.pause"):n[4]("audio.stop"))+"",l,r,u,s;return{c(){e=se("button"),t=se("span"),t.innerHTML='<span class="pinger"></span> <span class="dot"></span>',i=ze(),l=Dt(o),te(t,"class","record-icon"),te(e,"class",r=Qt(n[1]?"stop-button-paused":"stop-button")+" svelte-1fz19cj")},m(_,a){Ne(_,e,a),X(e,t),X(e,i),X(e,l),u||(s=kt(e,"click",n[12]),u=!0)},p(_,a){a&18&&o!==(o=(_[1]?_[4]("audio.pause"):_[4]("audio.stop"))+"")&&yt(l,o),a&2&&r!==(r=Qt(_[1]?"stop-button-paused":"stop-button")+" svelte-1fz19cj")&&te(e,"class",r)},i:Qe,o:Qe,d(_){_&&We(e),u=!1,s()}}}function Ci(n){let e,t,i,o,l,r,u,s,_,a=n[5].show_recording_waveform&&Zt(n);const f=[Ai,Mi,Ei],g=[];function p(c,d){return c[0]&&!c[6]?0:c[0]&&c[6]?1:2}o=p(n),l=g[o]=f[o](n);function S(c){n[15](c)}let E={i18n:n[4]};return n[9]!==void 0&&(E.micDevices=n[9]),u=new ln({props:E}),gn.push(()=>vi(u,"micDevices",S)),{c(){e=se("div"),a&&a.c(),t=ze(),i=se("div"),l.c(),r=ze(),hn(u.$$.fragment),te(i,"class","controls svelte-1fz19cj"),te(e,"class","mic-wrap svelte-1fz19cj")},m(c,d){Ne(c,e,d),a&&a.m(e,null),X(e,t),X(e,i),g[o].m(i,null),X(i,r),pn(u,i,null),_=!0},p(c,[d]){c[5].show_recording_waveform?a?a.p(c,d):(a=Zt(c),a.c(),a.m(e,t)):a&&(a.d(1),a=null);let y=o;o=p(c),o===y?g[o].p(c,d):(yi(),Ke(g[y],1,1,()=>{g[y]=null}),ki(),l=g[o],l?l.p(c,d):(l=g[o]=f[o](c),l.c()),Ye(l,1),l.m(i,r));const w={};d&16&&(w.i18n=c[4]),!s&&d&512&&(s=!0,w.micDevices=c[9],wi(()=>s=!1)),u.$set(w)},i(c){_||(Ye(l),Ye(u.$$.fragment,c),_=!0)},o(c){Ke(l),Ke(u.$$.fragment,c),_=!1},d(c){c&&We(e),a&&a.d(),g[o].d(),bn(u)}}}function Pi(n,e,t){let{recording:i=!1}=e,{paused_recording:o=!1}=e,{stop:l}=e,{record:r}=e,{i18n:u}=e,{waveform_settings:s}=e,{waveform_options:_={show_recording_waveform:!0}}=e,{waiting:a=!1}=e,f,g,p,S=[];Si(()=>{E()});const E=()=>{f!==void 0&&f.destroy(),p&&(f=pt.create({...s,height:100,container:p}),t(7,g=f.registerPlugin(qe.create())))};function c(D){gn[D?"unshift":"push"](()=>{p=D,t(8,p)})}const d=()=>{g?.stopMic(),l()},y=()=>{l()},w=()=>{g?.startMic(),r()};function B(D){S=D,t(9,S)}return n.$$set=D=>{"recording"in D&&t(0,i=D.recording),"paused_recording"in D&&t(1,o=D.paused_recording),"stop"in D&&t(2,l=D.stop),"record"in D&&t(3,r=D.record),"i18n"in D&&t(4,u=D.i18n),"waveform_settings"in D&&t(10,s=D.waveform_settings),"waveform_options"in D&&t(5,_=D.waveform_options),"waiting"in D&&t(6,a=D.waiting)},[i,o,l,r,u,_,a,g,p,S,s,c,d,y,w,B]}class Bi extends pi{constructor(e){super(),Di(this,e,Pi,Ci,Ri,{recording:0,paused_recording:1,stop:2,record:3,i18n:4,waveform_settings:10,waveform_options:5,waiting:6})}get recording(){return this.$$.ctx[0]}set recording(e){this.$$set({recording:e}),ae()}get paused_recording(){return this.$$.ctx[1]}set paused_recording(e){this.$$set({paused_recording:e}),ae()}get stop(){return this.$$.ctx[2]}set stop(e){this.$$set({stop:e}),ae()}get record(){return this.$$.ctx[3]}set record(e){this.$$set({record:e}),ae()}get i18n(){return this.$$.ctx[4]}set i18n(e){this.$$set({i18n:e}),ae()}get waveform_settings(){return this.$$.ctx[10]}set waveform_settings(e){this.$$set({waveform_settings:e}),ae()}get waveform_options(){return this.$$.ctx[5]}set waveform_options(e){this.$$set({waveform_options:e}),ae()}get waiting(){return this.$$.ctx[6]}set waiting(e){this.$$set({waiting:e}),ae()}}const{SvelteComponent:Li,add_flush_callback:Ie,append:$t,attr:zi,bind:Te,binding_callbacks:Ue,bubble:he,check_outros:Rt,create_component:ne,create_slot:Ii,destroy_component:ie,detach:Ee,element:Ti,empty:wn,flush:L,get_all_dirty_from_scope:Ui,get_slot_changes:qi,group_outros:St,init:ji,insert:Me,mount_component:oe,safe_not_equal:Oi,space:Le,transition_in:j,transition_out:O,update_slot_base:Wi}=window.__gradio__svelte__internal,{onDestroy:Ni,createEventDispatcher:Fi}=window.__gradio__svelte__internal;function Hi(n){let e,t,i,o,l;e=new en({props:{i18n:n[11],download:n[8]?n[1].url:null}}),e.$on("clear",n[27]),e.$on("edit",n[45]);function r(s){n[46](s)}let u={value:n[1],label:n[4],i18n:n[11],dispatch_blob:n[25],waveform_settings:n[12],waveform_options:n[14],trim_region_settings:n[13],handle_reset_value:n[15],editable:n[16],loop:n[6],interactive:!0};return n[23]!==void 0&&(u.mode=n[23]),i=new An({props:u}),Ue.push(()=>Te(i,"mode",r)),i.$on("stop",n[47]),i.$on("play",n[48]),i.$on("pause",n[49]),i.$on("edit",n[50]),{c(){ne(e.$$.fragment),t=Le(),ne(i.$$.fragment)},m(s,_){oe(e,s,_),Me(s,t,_),oe(i,s,_),l=!0},p(s,_){const a={};_[0]&2048&&(a.i18n=s[11]),_[0]&258&&(a.download=s[8]?s[1].url:null),e.$set(a);const f={};_[0]&2&&(f.value=s[1]),_[0]&16&&(f.label=s[4]),_[0]&2048&&(f.i18n=s[11]),_[0]&4096&&(f.waveform_settings=s[12]),_[0]&16384&&(f.waveform_options=s[14]),_[0]&8192&&(f.trim_region_settings=s[13]),_[0]&32768&&(f.handle_reset_value=s[15]),_[0]&65536&&(f.editable=s[16]),_[0]&64&&(f.loop=s[6]),!o&&_[0]&8388608&&(o=!0,f.mode=s[23],Ie(()=>o=!1)),i.$set(f)},i(s){l||(j(e.$$.fragment,s),j(i.$$.fragment,s),l=!0)},o(s){O(e.$$.fragment,s),O(i.$$.fragment,s),l=!1},d(s){s&&Ee(t),ie(e,s),ie(i,s)}}}function Vi(n){let e,t,i,o;const l=[Gi,Ji],r=[];function u(s,_){return s[2]==="microphone"?0:s[2]==="upload"?1:-1}return~(e=u(n))&&(t=r[e]=l[e](n)),{c(){t&&t.c(),i=wn()},m(s,_){~e&&r[e].m(s,_),Me(s,i,_),o=!0},p(s,_){let a=e;e=u(s),e===a?~e&&r[e].p(s,_):(t&&(St(),O(r[a],1,1,()=>{r[a]=null}),Rt()),~e?(t=r[e],t?t.p(s,_):(t=r[e]=l[e](s),t.c()),j(t,1),t.m(i.parentNode,i)):t=null)},i(s){o||(j(t),o=!0)},o(s){O(t),o=!1},d(s){s&&Ee(i),~e&&r[e].d(s)}}}function Ji(n){let e,t,i,o;function l(s){n[42](s)}function r(s){n[43](s)}let u={filetype:"audio/aac,audio/midi,audio/mpeg,audio/ogg,audio/wav,audio/x-wav,audio/opus,audio/webm,audio/flac,audio/vnd.rn-realaudio,audio/x-ms-wma,audio/x-aiff,audio/amr,audio/*",root:n[5],max_file_size:n[17],upload:n[18],stream_handler:n[19],$$slots:{default:[Yi]},$$scope:{ctx:n}};return n[0]!==void 0&&(u.dragging=n[0]),n[3]!==void 0&&(u.uploading=n[3]),e=new Bn({props:u}),Ue.push(()=>Te(e,"dragging",l)),Ue.push(()=>Te(e,"uploading",r)),e.$on("load",n[28]),e.$on("error",n[44]),{c(){ne(e.$$.fragment)},m(s,_){oe(e,s,_),o=!0},p(s,_){const a={};_[0]&32&&(a.root=s[5]),_[0]&131072&&(a.max_file_size=s[17]),_[0]&262144&&(a.upload=s[18]),_[0]&524288&&(a.stream_handler=s[19]),_[1]&2097152&&(a.$$scope={dirty:_,ctx:s}),!t&&_[0]&1&&(t=!0,a.dragging=s[0],Ie(()=>t=!1)),!i&&_[0]&8&&(i=!0,a.uploading=s[3],Ie(()=>i=!1)),e.$set(a)},i(s){o||(j(e.$$.fragment,s),o=!0)},o(s){O(e.$$.fragment,s),o=!1},d(s){ie(e,s)}}}function Gi(n){let e,t,i,o,l,r;e=new en({props:{i18n:n[11]}}),e.$on("clear",n[27]);const u=[Qi,Ki],s=[];function _(a,f){return a[10]?0:1}return i=_(n),o=s[i]=u[i](n),{c(){ne(e.$$.fragment),t=Le(),o.c(),l=wn()},m(a,f){oe(e,a,f),Me(a,t,f),s[i].m(a,f),Me(a,l,f),r=!0},p(a,f){const g={};f[0]&2048&&(g.i18n=a[11]),e.$set(g);let p=i;i=_(a),i===p?s[i].p(a,f):(St(),O(s[p],1,1,()=>{s[p]=null}),Rt(),o=s[i],o?o.p(a,f):(o=s[i]=u[i](a),o.c()),j(o,1),o.m(l.parentNode,l))},i(a){r||(j(e.$$.fragment,a),j(o),r=!0)},o(a){O(e.$$.fragment,a),O(o),r=!1},d(a){a&&(Ee(t),Ee(l)),ie(e,a),s[i].d(a)}}}function Yi(n){let e;const t=n[37].default,i=Ii(t,n,n[52],null);return{c(){i&&i.c()},m(o,l){i&&i.m(o,l),e=!0},p(o,l){i&&i.p&&(!e||l[1]&2097152)&&Wi(i,t,o,o[52],e?qi(t,o[52],l,null):Ui(o[52]),null)},i(o){e||(j(i,o),e=!0)},o(o){O(i,o),e=!1},d(o){i&&i.d(o)}}}function Ki(n){let e,t,i;function o(r){n[38](r)}let l={i18n:n[11],editable:n[16],dispatch_blob:n[25],waveform_settings:n[12],waveform_options:n[14],handle_reset_value:n[15]};return n[23]!==void 0&&(l.mode=n[23]),e=new bi({props:l}),Ue.push(()=>Te(e,"mode",o)),e.$on("start_recording",n[39]),e.$on("pause_recording",n[40]),e.$on("stop_recording",n[41]),{c(){ne(e.$$.fragment)},m(r,u){oe(e,r,u),i=!0},p(r,u){const s={};u[0]&2048&&(s.i18n=r[11]),u[0]&65536&&(s.editable=r[16]),u[0]&4096&&(s.waveform_settings=r[12]),u[0]&16384&&(s.waveform_options=r[14]),u[0]&32768&&(s.handle_reset_value=r[15]),!t&&u[0]&8388608&&(t=!0,s.mode=r[23],Ie(()=>t=!1)),e.$set(s)},i(r){i||(j(e.$$.fragment,r),i=!0)},o(r){O(e.$$.fragment,r),i=!1},d(r){ie(e,r)}}}function Qi(n){let e,t;return e=new Bi({props:{record:n[26],recording:n[22],stop:n[29],i18n:n[11],waveform_settings:n[12],waveform_options:n[14],waiting:n[21]==="waiting"}}),{c(){ne(e.$$.fragment)},m(i,o){oe(e,i,o),t=!0},p(i,o){const l={};o[0]&4194304&&(l.recording=i[22]),o[0]&2048&&(l.i18n=i[11]),o[0]&4096&&(l.waveform_settings=i[12]),o[0]&16384&&(l.waveform_options=i[14]),o[0]&2097152&&(l.waiting=i[21]==="waiting"),e.$set(l)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){O(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Xi(n){let e,t,i,o,l,r,u,s,_,a,f;e=new Ln({props:{show_label:n[7],Icon:zn,float:n[2]==="upload"&&n[1]===null,label:n[4]||n[11]("audio.audio")}}),o=new Un({props:{time_limit:n[20]}});const g=[Vi,Hi],p=[];function S(d,y){return d[1]===null||d[10]?0:1}r=S(n),u=p[r]=g[r](n);function E(d){n[51](d)}let c={sources:n[9],handle_clear:n[27]};return n[2]!==void 0&&(c.active_source=n[2]),_=new Tn({props:c}),Ue.push(()=>Te(_,"active_source",E)),{c(){ne(e.$$.fragment),t=Le(),i=Ti("div"),ne(o.$$.fragment),l=Le(),u.c(),s=Le(),ne(_.$$.fragment),zi(i,"class","audio-container svelte-cbyffp")},m(d,y){oe(e,d,y),Me(d,t,y),Me(d,i,y),oe(o,i,null),$t(i,l),p[r].m(i,null),$t(i,s),oe(_,i,null),f=!0},p(d,y){const w={};y[0]&128&&(w.show_label=d[7]),y[0]&6&&(w.float=d[2]==="upload"&&d[1]===null),y[0]&2064&&(w.label=d[4]||d[11]("audio.audio")),e.$set(w);const B={};y[0]&1048576&&(B.time_limit=d[20]),o.$set(B);let D=r;r=S(d),r===D?p[r].p(d,y):(St(),O(p[D],1,1,()=>{p[D]=null}),Rt(),u=p[r],u?u.p(d,y):(u=p[r]=g[r](d),u.c()),j(u,1),u.m(i,s));const A={};y[0]&512&&(A.sources=d[9]),!a&&y[0]&4&&(a=!0,A.active_source=d[2],Ie(()=>a=!1)),_.$set(A)},i(d){f||(j(e.$$.fragment,d),j(o.$$.fragment,d),j(u),j(_.$$.fragment,d),f=!0)},o(d){O(e.$$.fragment,d),O(o.$$.fragment,d),O(u),O(_.$$.fragment,d),f=!1},d(d){d&&(Ee(t),Ee(i)),ie(e,d),ie(o),p[r].d(),ie(_)}}}const xt=44;function Zi(n,e,t){let{$$slots:i={},$$scope:o}=e,{value:l=null}=e,{label:r}=e,{root:u}=e,{loop:s}=e,{show_label:_=!0}=e,{show_download_button:a=!1}=e,{sources:f=["microphone","upload"]}=e,{pending:g=!1}=e,{streaming:p=!1}=e,{i18n:S}=e,{waveform_settings:E}=e,{trim_region_settings:c={}}=e,{waveform_options:d={}}=e,{dragging:y}=e,{active_source:w}=e,{handle_reset_value:B=()=>{}}=e,{editable:D=!0}=e,{max_file_size:A=null}=e,{upload:W}=e,{stream_handler:I}=e,{stream_every:v}=e,{uploading:z=!1}=e,N=null,V="closed";const C=m=>{m==="closed"?(t(20,N=null),t(21,V="closed")):m==="waiting"?t(21,V="waiting"):t(21,V="open")},de=m=>{J&&t(20,N=m)};let J=!1,R,k="",T,G=[],Y=!1,ve=!1,K=[],b;function F(){b=[Pt(()=>import("./module-BDCzeD4R.js"),__vite__mapDeps([0,1,2,3]),import.meta.url),Pt(()=>import("./module-BA06XY8_.js"),__vite__mapDeps([4,1]),import.meta.url)]}p&&F();const P=Fi(),H=async(m,q)=>{let $=new File(m,"audio.wav");const me=await Pn([$],q==="stream");t(1,l=(await W(me,u,void 0,A||void 0))?.filter(Boolean)[0]),P(q,l)};Ni(()=>{p&&R&&R.state!=="inactive"&&R.stop()});async function ke(){let m;try{m=await navigator.mediaDevices.getUserMedia({audio:!0})}catch(q){if(!navigator.mediaDevices){P("error",S("audio.no_device_support"));return}if(q instanceof DOMException&&q.name=="NotAllowedError"){P("error",S("audio.allow_recording_access"));return}throw q}if(m!=null){if(p){const[{MediaRecorder:q,register:$},{connect:me}]=await Promise.all(b);await $(await me()),R=new q(m,{mimeType:"audio/wav"}),R.addEventListener("dataavailable",$e)}else R=new MediaRecorder(m),R.addEventListener("dataavailable",q=>{K.push(q.data)});R.addEventListener("stop",async()=>{t(22,J=!1),await H(K,"change"),await H(K,"stop_recording"),K=[]}),ve=!0}}async function $e(m){let q=await m.data.arrayBuffer(),$=new Uint8Array(q);if(T||(t(34,T=new Uint8Array(q.slice(0,xt))),$=new Uint8Array(q.slice(xt))),g)G.push($);else{let me=[T].concat(G,[$]);if(!J||V==="waiting")return;H(me,"stream"),t(35,G=[])}}async function xe(){t(22,J=!0),P("start_recording"),ve||await ke(),t(34,T=void 0),p&&R.start(v*1e3)}function et(){P("change",null),P("clear"),t(23,k=""),t(1,l=null)}function tt({detail:m}){t(1,l=m),P("change",m),P("upload",m)}function nt(){t(22,J=!1),p&&(P("close_stream"),P("stop_recording"),R.stop(),g&&t(36,Y=!0),H(K,"stop_recording"),P("clear"),t(23,k=""))}function it(m){k=m,t(23,k)}function ot(m){he.call(this,n,m)}function st(m){he.call(this,n,m)}function rt(m){he.call(this,n,m)}function lt(m){y=m,t(0,y)}function at(m){z=m,t(3,z)}const ut=({detail:m})=>P("error",m),_t=()=>t(23,k="edit");function ct(m){k=m,t(23,k)}function ft(m){he.call(this,n,m)}function dt(m){he.call(this,n,m)}function mt(m){he.call(this,n,m)}function gt(m){he.call(this,n,m)}function ht(m){w=m,t(2,w)}return n.$$set=m=>{"value"in m&&t(1,l=m.value),"label"in m&&t(4,r=m.label),"root"in m&&t(5,u=m.root),"loop"in m&&t(6,s=m.loop),"show_label"in m&&t(7,_=m.show_label),"show_download_button"in m&&t(8,a=m.show_download_button),"sources"in m&&t(9,f=m.sources),"pending"in m&&t(30,g=m.pending),"streaming"in m&&t(10,p=m.streaming),"i18n"in m&&t(11,S=m.i18n),"waveform_settings"in m&&t(12,E=m.waveform_settings),"trim_region_settings"in m&&t(13,c=m.trim_region_settings),"waveform_options"in m&&t(14,d=m.waveform_options),"dragging"in m&&t(0,y=m.dragging),"active_source"in m&&t(2,w=m.active_source),"handle_reset_value"in m&&t(15,B=m.handle_reset_value),"editable"in m&&t(16,D=m.editable),"max_file_size"in m&&t(17,A=m.max_file_size),"upload"in m&&t(18,W=m.upload),"stream_handler"in m&&t(19,I=m.stream_handler),"stream_every"in m&&t(31,v=m.stream_every),"uploading"in m&&t(3,z=m.uploading),"$$scope"in m&&t(52,o=m.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&1&&P("drag",y),n.$$.dirty[0]&1073741824|n.$$.dirty[1]&56&&Y&&g===!1&&(t(36,Y=!1),T&&G)){let m=[T].concat(G);t(35,G=[]),H(m,"stream")}},[y,l,w,z,r,u,s,_,a,f,p,S,E,c,d,B,D,A,W,I,N,V,J,k,P,H,xe,et,tt,nt,g,v,C,de,T,G,Y,i,it,ot,st,rt,lt,at,ut,_t,ct,ft,dt,mt,gt,ht,o]}class $i extends Li{constructor(e){super(),ji(this,e,Zi,Xi,Oi,{value:1,label:4,root:5,loop:6,show_label:7,show_download_button:8,sources:9,pending:30,streaming:10,i18n:11,waveform_settings:12,trim_region_settings:13,waveform_options:14,dragging:0,active_source:2,handle_reset_value:15,editable:16,max_file_size:17,upload:18,stream_handler:19,stream_every:31,uploading:3,modify_stream:32,set_time_limit:33},null,[-1,-1])}get value(){return this.$$.ctx[1]}set value(e){this.$$set({value:e}),L()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),L()}get root(){return this.$$.ctx[5]}set root(e){this.$$set({root:e}),L()}get loop(){return this.$$.ctx[6]}set loop(e){this.$$set({loop:e}),L()}get show_label(){return this.$$.ctx[7]}set show_label(e){this.$$set({show_label:e}),L()}get show_download_button(){return this.$$.ctx[8]}set show_download_button(e){this.$$set({show_download_button:e}),L()}get sources(){return this.$$.ctx[9]}set sources(e){this.$$set({sources:e}),L()}get pending(){return this.$$.ctx[30]}set pending(e){this.$$set({pending:e}),L()}get streaming(){return this.$$.ctx[10]}set streaming(e){this.$$set({streaming:e}),L()}get i18n(){return this.$$.ctx[11]}set i18n(e){this.$$set({i18n:e}),L()}get waveform_settings(){return this.$$.ctx[12]}set waveform_settings(e){this.$$set({waveform_settings:e}),L()}get trim_region_settings(){return this.$$.ctx[13]}set trim_region_settings(e){this.$$set({trim_region_settings:e}),L()}get waveform_options(){return this.$$.ctx[14]}set waveform_options(e){this.$$set({waveform_options:e}),L()}get dragging(){return this.$$.ctx[0]}set dragging(e){this.$$set({dragging:e}),L()}get active_source(){return this.$$.ctx[2]}set active_source(e){this.$$set({active_source:e}),L()}get handle_reset_value(){return this.$$.ctx[15]}set handle_reset_value(e){this.$$set({handle_reset_value:e}),L()}get editable(){return this.$$.ctx[16]}set editable(e){this.$$set({editable:e}),L()}get max_file_size(){return this.$$.ctx[17]}set max_file_size(e){this.$$set({max_file_size:e}),L()}get upload(){return this.$$.ctx[18]}set upload(e){this.$$set({upload:e}),L()}get stream_handler(){return this.$$.ctx[19]}set stream_handler(e){this.$$set({stream_handler:e}),L()}get stream_every(){return this.$$.ctx[31]}set stream_every(e){this.$$set({stream_every:e}),L()}get uploading(){return this.$$.ctx[3]}set uploading(e){this.$$set({uploading:e}),L()}get modify_stream(){return this.$$.ctx[32]}get set_time_limit(){return this.$$.ctx[33]}}const xi=$i,{SvelteComponent:eo,add_flush_callback:Fe,assign:vn,bind:He,binding_callbacks:Ve,check_outros:to,create_component:be,destroy_component:pe,detach:Et,empty:no,flush:M,get_spread_object:kn,get_spread_update:yn,group_outros:io,init:oo,insert:Mt,mount_component:we,safe_not_equal:so,space:Dn,transition_in:re,transition_out:le}=window.__gradio__svelte__internal,{afterUpdate:ro,onMount:lo}=window.__gradio__svelte__internal;function ao(n){let e,t;return e=new nn({props:{variant:n[0]===null&&n[24]==="upload"?"dashed":"solid",border_mode:n[26]?"focus":"base",padding:!1,allow_overflow:!1,elem_id:n[3],elem_classes:n[4],visible:n[5],container:n[11],scale:n[12],min_width:n[13],$$slots:{default:[co]},$$scope:{ctx:n}}}),{c(){be(e.$$.fragment)},m(i,o){we(e,i,o),t=!0},p(i,o){const l={};o[0]&16777217&&(l.variant=i[0]===null&&i[24]==="upload"?"dashed":"solid"),o[0]&67108864&&(l.border_mode=i[26]?"focus":"base"),o[0]&8&&(l.elem_id=i[3]),o[0]&16&&(l.elem_classes=i[4]),o[0]&32&&(l.visible=i[5]),o[0]&2048&&(l.container=i[11]),o[0]&4096&&(l.scale=i[12]),o[0]&8192&&(l.min_width=i[13]),o[0]&268355463|o[2]&8&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){t||(re(e.$$.fragment,i),t=!0)},o(i){le(e.$$.fragment,i),t=!1},d(i){pe(e,i)}}}function uo(n){let e,t;return e=new nn({props:{variant:"solid",border_mode:n[26]?"focus":"base",padding:!1,allow_overflow:!1,elem_id:n[3],elem_classes:n[4],visible:n[5],container:n[11],scale:n[12],min_width:n[13],$$slots:{default:[fo]},$$scope:{ctx:n}}}),{c(){be(e.$$.fragment)},m(i,o){we(e,i,o),t=!0},p(i,o){const l={};o[0]&67108864&&(l.border_mode=i[26]?"focus":"base"),o[0]&8&&(l.elem_id=i[3]),o[0]&16&&(l.elem_classes=i[4]),o[0]&32&&(l.visible=i[5]),o[0]&2048&&(l.container=i[11]),o[0]&4096&&(l.scale=i[12]),o[0]&8192&&(l.min_width=i[13]),o[0]&138921219|o[2]&8&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){t||(re(e.$$.fragment,i),t=!0)},o(i){le(e.$$.fragment,i),t=!1},d(i){pe(e,i)}}}function _o(n){let e,t;return e=new jn({props:{i18n:n[22].i18n,type:"audio"}}),{c(){be(e.$$.fragment)},m(i,o){we(e,i,o),t=!0},p(i,o){const l={};o[0]&4194304&&(l.i18n=i[22].i18n),e.$set(l)},i(i){t||(re(e.$$.fragment,i),t=!0)},o(i){le(e.$$.fragment,i),t=!1},d(i){pe(e,i)}}}function co(n){let e,t,i,o,l,r,u,s;const _=[{autoscroll:n[22].autoscroll},{i18n:n[22].i18n},n[1]];let a={};for(let c=0;c<_.length;c+=1)a=vn(a,_[c]);e=new tn({props:a}),e.$on("clear_status",n[44]);function f(c){n[45](c)}function g(c){n[46](c)}function p(c){n[47](c)}function S(c){n[48](c)}let E={label:n[8],show_label:n[10],show_download_button:n[15],value:n[0],root:n[9],sources:n[7],active_source:n[24],pending:n[19],streaming:n[20],loop:n[14],max_file_size:n[22].max_file_size,handle_reset_value:n[28],editable:n[17],i18n:n[22].i18n,waveform_settings:n[27],waveform_options:n[18],trim_region_settings:n[29],stream_every:n[21],upload:n[22].client.upload,stream_handler:n[22].client.stream,$$slots:{default:[_o]},$$scope:{ctx:n}};return n[26]!==void 0&&(E.dragging=n[26]),n[23]!==void 0&&(E.uploading=n[23]),n[25]!==void 0&&(E.modify_stream=n[25]),n[2]!==void 0&&(E.set_time_limit=n[2]),i=new xi({props:E}),Ve.push(()=>He(i,"dragging",f)),Ve.push(()=>He(i,"uploading",g)),Ve.push(()=>He(i,"modify_stream",p)),Ve.push(()=>He(i,"set_time_limit",S)),i.$on("change",n[49]),i.$on("stream",n[50]),i.$on("drag",n[51]),i.$on("edit",n[52]),i.$on("play",n[53]),i.$on("pause",n[54]),i.$on("stop",n[55]),i.$on("start_recording",n[56]),i.$on("pause_recording",n[57]),i.$on("stop_recording",n[58]),i.$on("upload",n[59]),i.$on("clear",n[60]),i.$on("error",n[30]),i.$on("close_stream",n[61]),{c(){be(e.$$.fragment),t=Dn(),be(i.$$.fragment)},m(c,d){we(e,c,d),Mt(c,t,d),we(i,c,d),s=!0},p(c,d){const y=d[0]&4194306?yn(_,[d[0]&4194304&&{autoscroll:c[22].autoscroll},d[0]&4194304&&{i18n:c[22].i18n},d[0]&2&&kn(c[1])]):{};e.$set(y);const w={};d[0]&256&&(w.label=c[8]),d[0]&1024&&(w.show_label=c[10]),d[0]&32768&&(w.show_download_button=c[15]),d[0]&1&&(w.value=c[0]),d[0]&512&&(w.root=c[9]),d[0]&128&&(w.sources=c[7]),d[0]&16777216&&(w.active_source=c[24]),d[0]&524288&&(w.pending=c[19]),d[0]&1048576&&(w.streaming=c[20]),d[0]&16384&&(w.loop=c[14]),d[0]&4194304&&(w.max_file_size=c[22].max_file_size),d[0]&131072&&(w.editable=c[17]),d[0]&4194304&&(w.i18n=c[22].i18n),d[0]&134217728&&(w.waveform_settings=c[27]),d[0]&262144&&(w.waveform_options=c[18]),d[0]&2097152&&(w.stream_every=c[21]),d[0]&4194304&&(w.upload=c[22].client.upload),d[0]&4194304&&(w.stream_handler=c[22].client.stream),d[0]&4194304|d[2]&8&&(w.$$scope={dirty:d,ctx:c}),!o&&d[0]&67108864&&(o=!0,w.dragging=c[26],Fe(()=>o=!1)),!l&&d[0]&8388608&&(l=!0,w.uploading=c[23],Fe(()=>l=!1)),!r&&d[0]&33554432&&(r=!0,w.modify_stream=c[25],Fe(()=>r=!1)),!u&&d[0]&4&&(u=!0,w.set_time_limit=c[2],Fe(()=>u=!1)),i.$set(w)},i(c){s||(re(e.$$.fragment,c),re(i.$$.fragment,c),s=!0)},o(c){le(e.$$.fragment,c),le(i.$$.fragment,c),s=!1},d(c){c&&Et(t),pe(e,c),pe(i,c)}}}function fo(n){let e,t,i,o;const l=[{autoscroll:n[22].autoscroll},{i18n:n[22].i18n},n[1]];let r={};for(let u=0;u<l.length;u+=1)r=vn(r,l[u]);return e=new tn({props:r}),e.$on("clear_status",n[38]),i=new Cn({props:{i18n:n[22].i18n,show_label:n[10],show_download_button:n[15],show_share_button:n[16],value:n[0],label:n[8],loop:n[14],waveform_settings:n[27],waveform_options:n[18],editable:n[17]}}),i.$on("share",n[39]),i.$on("error",n[40]),i.$on("play",n[41]),i.$on("pause",n[42]),i.$on("stop",n[43]),{c(){be(e.$$.fragment),t=Dn(),be(i.$$.fragment)},m(u,s){we(e,u,s),Mt(u,t,s),we(i,u,s),o=!0},p(u,s){const _=s[0]&4194306?yn(l,[s[0]&4194304&&{autoscroll:u[22].autoscroll},s[0]&4194304&&{i18n:u[22].i18n},s[0]&2&&kn(u[1])]):{};e.$set(_);const a={};s[0]&4194304&&(a.i18n=u[22].i18n),s[0]&1024&&(a.show_label=u[10]),s[0]&32768&&(a.show_download_button=u[15]),s[0]&65536&&(a.show_share_button=u[16]),s[0]&1&&(a.value=u[0]),s[0]&256&&(a.label=u[8]),s[0]&16384&&(a.loop=u[14]),s[0]&134217728&&(a.waveform_settings=u[27]),s[0]&262144&&(a.waveform_options=u[18]),s[0]&131072&&(a.editable=u[17]),i.$set(a)},i(u){o||(re(e.$$.fragment,u),re(i.$$.fragment,u),o=!0)},o(u){le(e.$$.fragment,u),le(i.$$.fragment,u),o=!1},d(u){u&&Et(t),pe(e,u),pe(i,u)}}}function mo(n){let e,t,i,o;const l=[uo,ao],r=[];function u(s,_){return s[6]?1:0}return e=u(n),t=r[e]=l[e](n),{c(){t.c(),i=no()},m(s,_){r[e].m(s,_),Mt(s,i,_),o=!0},p(s,_){let a=e;e=u(s),e===a?r[e].p(s,_):(io(),le(r[a],1,1,()=>{r[a]=null}),to(),t=r[e],t?t.p(s,_):(t=r[e]=l[e](s),t.c()),re(t,1),t.m(i.parentNode,i))},i(s){o||(re(t),o=!0)},o(s){le(t),o=!1},d(s){s&&Et(i),r[e].d(s)}}}function go(n,e,t){let{value_is_output:i=!1}=e,{elem_id:o=""}=e,{elem_classes:l=[]}=e,{visible:r=!0}=e,{interactive:u}=e,{value:s=null}=e,{sources:_}=e,{label:a}=e,{root:f}=e,{show_label:g}=e,{container:p=!0}=e,{scale:S=null}=e,{min_width:E=void 0}=e,{loading_status:c}=e,{autoplay:d=!1}=e,{loop:y=!1}=e,{show_download_button:w}=e,{show_share_button:B=!1}=e,{editable:D=!0}=e,{waveform_options:A={}}=e,{pending:W}=e,{streaming:I}=e,{stream_every:v}=e,{input_ready:z}=e,N=!1,V="closed",C;function de(h){V=h,C(h)}const J=()=>V;let{set_time_limit:R}=e,{gradio:k}=e,T=null,G,Y=s;const ve=()=>{Y===null||s===Y||t(0,s=Y)};let K,b,F="darkorange";lo(()=>{F=getComputedStyle(document?.documentElement).getPropertyValue("--color-accent"),H(),t(27,b.waveColor=A.waveform_color||"#9ca3af",b),t(27,b.progressColor=A.waveform_progress_color||F,b),t(27,b.mediaControls=A.show_controls,b),t(27,b.sampleRate=A.sample_rate||44100,b)});const P={color:A.trim_region_color,drag:!0,resize:!0};function H(){document.documentElement.style.setProperty("--trim-region-color",P.color||F)}function ke({detail:h}){const[Sn,En]=h.includes("Invalid file type")?["warning","complete"]:["error","error"];t(1,c=c||{}),t(1,c.status=En,c),t(1,c.message=h,c),k.dispatch(Sn,h)}ro(()=>{t(31,i=!1)});const $e=()=>k.dispatch("clear_status",c),xe=h=>k.dispatch("share",h.detail),et=h=>k.dispatch("error",h.detail),tt=()=>k.dispatch("play"),nt=()=>k.dispatch("pause"),it=()=>k.dispatch("stop"),ot=()=>k.dispatch("clear_status",c);function st(h){K=h,t(26,K)}function rt(h){N=h,t(23,N)}function lt(h){C=h,t(25,C)}function at(h){R=h,t(2,R)}const ut=({detail:h})=>t(0,s=h),_t=({detail:h})=>{t(0,s=h),k.dispatch("stream",s)},ct=({detail:h})=>t(26,K=h),ft=()=>k.dispatch("edit"),dt=()=>k.dispatch("play"),mt=()=>k.dispatch("pause"),gt=()=>k.dispatch("stop"),ht=()=>k.dispatch("start_recording"),m=()=>k.dispatch("pause_recording"),q=h=>k.dispatch("stop_recording"),$=()=>k.dispatch("upload"),me=()=>k.dispatch("clear"),Rn=()=>k.dispatch("close_stream","stream");return n.$$set=h=>{"value_is_output"in h&&t(31,i=h.value_is_output),"elem_id"in h&&t(3,o=h.elem_id),"elem_classes"in h&&t(4,l=h.elem_classes),"visible"in h&&t(5,r=h.visible),"interactive"in h&&t(6,u=h.interactive),"value"in h&&t(0,s=h.value),"sources"in h&&t(7,_=h.sources),"label"in h&&t(8,a=h.label),"root"in h&&t(9,f=h.root),"show_label"in h&&t(10,g=h.show_label),"container"in h&&t(11,p=h.container),"scale"in h&&t(12,S=h.scale),"min_width"in h&&t(13,E=h.min_width),"loading_status"in h&&t(1,c=h.loading_status),"autoplay"in h&&t(33,d=h.autoplay),"loop"in h&&t(14,y=h.loop),"show_download_button"in h&&t(15,w=h.show_download_button),"show_share_button"in h&&t(16,B=h.show_share_button),"editable"in h&&t(17,D=h.editable),"waveform_options"in h&&t(18,A=h.waveform_options),"pending"in h&&t(19,W=h.pending),"streaming"in h&&t(20,I=h.streaming),"stream_every"in h&&t(21,v=h.stream_every),"input_ready"in h&&t(32,z=h.input_ready),"set_time_limit"in h&&t(2,R=h.set_time_limit),"gradio"in h&&t(22,k=h.gradio)},n.$$.update=()=>{n.$$.dirty[0]&8388608&&t(32,z=!N),n.$$.dirty[0]&1|n.$$.dirty[1]&64&&s&&Y===null&&t(37,Y=s),n.$$.dirty[0]&4194305|n.$$.dirty[1]&33&&JSON.stringify(s)!==JSON.stringify(T)&&(t(36,T=s),k.dispatch("change"),i||k.dispatch("input")),n.$$.dirty[0]&16777344&&!G&&_&&t(24,G=_[0]),n.$$.dirty[1]&4&&t(27,b={height:50,barWidth:2,barGap:3,cursorWidth:2,cursorColor:"#ddd5e9",autoplay:d,barRadius:10,dragToSeek:!0,normalize:!0,minPxPerSec:20})},[s,c,R,o,l,r,u,_,a,f,g,p,S,E,y,w,B,D,A,W,I,v,k,N,G,C,K,b,ve,P,ke,i,z,d,de,J,T,Y,$e,xe,et,tt,nt,it,ot,st,rt,lt,at,ut,_t,ct,ft,dt,mt,gt,ht,m,q,$,me,Rn]}class ho extends eo{constructor(e){super(),oo(this,e,go,mo,so,{value_is_output:31,elem_id:3,elem_classes:4,visible:5,interactive:6,value:0,sources:7,label:8,root:9,show_label:10,container:11,scale:12,min_width:13,loading_status:1,autoplay:33,loop:14,show_download_button:15,show_share_button:16,editable:17,waveform_options:18,pending:19,streaming:20,stream_every:21,input_ready:32,modify_stream_state:34,get_stream_state:35,set_time_limit:2,gradio:22},null,[-1,-1,-1])}get value_is_output(){return this.$$.ctx[31]}set value_is_output(e){this.$$set({value_is_output:e}),M()}get elem_id(){return this.$$.ctx[3]}set elem_id(e){this.$$set({elem_id:e}),M()}get elem_classes(){return this.$$.ctx[4]}set elem_classes(e){this.$$set({elem_classes:e}),M()}get visible(){return this.$$.ctx[5]}set visible(e){this.$$set({visible:e}),M()}get interactive(){return this.$$.ctx[6]}set interactive(e){this.$$set({interactive:e}),M()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),M()}get sources(){return this.$$.ctx[7]}set sources(e){this.$$set({sources:e}),M()}get label(){return this.$$.ctx[8]}set label(e){this.$$set({label:e}),M()}get root(){return this.$$.ctx[9]}set root(e){this.$$set({root:e}),M()}get show_label(){return this.$$.ctx[10]}set show_label(e){this.$$set({show_label:e}),M()}get container(){return this.$$.ctx[11]}set container(e){this.$$set({container:e}),M()}get scale(){return this.$$.ctx[12]}set scale(e){this.$$set({scale:e}),M()}get min_width(){return this.$$.ctx[13]}set min_width(e){this.$$set({min_width:e}),M()}get loading_status(){return this.$$.ctx[1]}set loading_status(e){this.$$set({loading_status:e}),M()}get autoplay(){return this.$$.ctx[33]}set autoplay(e){this.$$set({autoplay:e}),M()}get loop(){return this.$$.ctx[14]}set loop(e){this.$$set({loop:e}),M()}get show_download_button(){return this.$$.ctx[15]}set show_download_button(e){this.$$set({show_download_button:e}),M()}get show_share_button(){return this.$$.ctx[16]}set show_share_button(e){this.$$set({show_share_button:e}),M()}get editable(){return this.$$.ctx[17]}set editable(e){this.$$set({editable:e}),M()}get waveform_options(){return this.$$.ctx[18]}set waveform_options(e){this.$$set({waveform_options:e}),M()}get pending(){return this.$$.ctx[19]}set pending(e){this.$$set({pending:e}),M()}get streaming(){return this.$$.ctx[20]}set streaming(e){this.$$set({streaming:e}),M()}get stream_every(){return this.$$.ctx[21]}set stream_every(e){this.$$set({stream_every:e}),M()}get input_ready(){return this.$$.ctx[32]}set input_ready(e){this.$$set({input_ready:e}),M()}get modify_stream_state(){return this.$$.ctx[34]}get get_stream_state(){return this.$$.ctx[35]}get set_time_limit(){return this.$$.ctx[2]}set set_time_limit(e){this.$$set({set_time_limit:e}),M()}get gradio(){return this.$$.ctx[22]}set gradio(e){this.$$set({gradio:e}),M()}}const Ho=ho;export{Go as BaseExample,xi as BaseInteractiveAudio,An as BasePlayer,Cn as BaseStaticAudio,Ho as default};
//# sourceMappingURL=index-CCQMYt6d.js.map
